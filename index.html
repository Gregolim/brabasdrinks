<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Braba's Drinks</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #000;
  color: #fff;
  margin: 0;
}

header {
  text-align: center;
  padding: 20px;
  background: #111;
}

h1, h2, h3 {
  color: #ff4da6;
}

.menu {
  max-width: 600px;
  margin: auto;
  padding: 20px;
}

.item {
  background: #1a1a1a;
  border: 2px solid #ff4da6;
  border-radius: 12px;
  padding: 15px;
  margin-bottom: 12px;
  display: flex;
  justify-content: space-between;
}

.item input {
  width: 60px;
  text-align: center;
}

.summary {
  background: #1a1a1a;
  border: 2px solid #ff4da6;
  border-radius: 12px;
  padding: 20px;
}

.btn {
  width: 100%;
  padding: 15px;
  background: #ff4da6;
  border: none;
  border-radius: 12px;
  font-size: 1.1rem;
  font-weight: bold;
  cursor: pointer;
}

.hidden {
  display: none;
}
</style>
</head>

<body>

<header>
  <h1>Braba's Drinks</h1>
</header>

<section class="menu" id="formulario">
<h2>Monte seu Pedido</h2>

<div class="item"><label>Cop√£o de Gin - R$22</label><input type="number" min="0" value="0" data-price="22"></div>
<div class="item"><label>Cop√£o de Vodka - R$22</label><input type="number" min="0" value="0" data-price="22"></div>
<div class="item"><label>Cop√£o de Whisky - R$28</label><input type="number" min="0" value="0" data-price="28"></div>
<div class="item"><label>Gourmet Morango - R$27</label><input type="number" min="0" value="0" data-price="27"></div>
<div class="item"><label>Gourmet Maracuj√° - R$27</label><input type="number" min="0" value="0" data-price="27"></div>

<div class="summary">
<h3>Resumo do Pedido</h3>
<p id="total">Total: R$ 0,00</p>

<h4>Entrega</h4>
<label><input type="radio" name="entrega" value="retirada" checked> Retirada</label><br>
<label><input type="radio" name="entrega" value="entrega"> Entrega (+R$7)</label>

<h4>Pagamento</h4>
<label><input type="radio" name="pagamento" value="cartao"> Cart√£o</label><br>
<label><input type="radio" name="pagamento" value="dinheiro"> Dinheiro</label><br>
<label><input type="radio" name="pagamento" value="pix"> Pix</label>

<br><br>
<button class="btn" onclick="finalizarPedido()">Finalizar Pedido</button>
</div>
</section>

<section class="menu hidden" id="telaFinal">
<h2>‚úÖ Pedido registrado!</h2>
<p id="mensagemFinal"></p>
<button class="btn" onclick="location.reload()">Novo pedido</button>
</section>

<script>
const inputs = document.querySelectorAll(".item input");
const totalEl = document.getElementById("total");

function calcularTotal() {
  let total = 0;

  inputs.forEach(input => {
    const qtd = Number(input.value);
    const preco = Number(input.dataset.price);
    if (!isNaN(qtd) && !isNaN(preco)) {
      total += qtd * preco;
    }
  });

  const entrega = document.querySelector('input[name="entrega"]:checked');
  if (entrega && entrega.value === "entrega" && total > 0) {
    total += 7;
  }

  totalEl.innerText = `Total: R$ ${total.toFixed(2).replace(".", ",")}`;
  return total;
}

// recalcula sempre
inputs.forEach(i => i.addEventListener("input", calcularTotal));
document.querySelectorAll('input[name="entrega"]').forEach(r => r.addEventListener("change", calcularTotal));

// for√ßa c√°lculo ao carregar
calcularTotal();

function finalizarTela(texto) {
  document.getElementById("formulario").classList.add("hidden");
  document.getElementById("telaFinal").classList.remove("hidden");
  document.getElementById("mensagemFinal").innerText = texto;
}

function finalizarPedido() {
  const total = calcularTotal();

  if (total <= 0) {
    alert("Adicione pelo menos um item ao pedido.");
    return;
  }

  const pagamento = document.querySelector('input[name="pagamento"]:checked');
  if (!pagamento) {
    alert("Selecione a forma de pagamento.");
    return;
  }

  let mensagem = "üçπ Pedido Braba's Drinks üçπ\n\n";

  inputs.forEach(input => {
    const qtd = Number(input.value);
    if (qtd > 0) {
      const nome = input.previousElementSibling.innerText;
      mensagem += `${nome} x ${qtd}\n`;
    }
  });

  mensagem += `\nüí≥ Pagamento: ${pagamento.value}`;
  mensagem += `\nTotal: R$ ${total.toFixed(2).replace(".", ",")}`;

  const url = "https://wa.me/5567998604369?text=" + encodeURIComponent(mensagem);

  // ABRE WHATSAPP SEM FALHAR
  window.location.href = url;

  if (pagamento.value === "pix") {
    finalizarTela(
      "üí≥ Pagamento via PIX selecionado.\n\n" +
      "Pedido registrado com sucesso.\n" +
      "Aguardando confirma√ß√£o do pagamento."
    );
  } else {
    finalizarTela(
      "‚úÖ Pedido enviado com sucesso!\n\n" +
      "Obrigado pela prefer√™ncia."
    );
  }
}
</script>

</body>
</html>



